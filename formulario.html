<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulário</title>
    <style>

        body{
            max-width: 200px;
            margin: auto;
        }

        label{
            display: block;
            margin-top: 10px;
        }
        #send-button{
            margin-top: 15px;
            background: #28a745;
            color: #ffff;
            border: none;
            cursor: pointer;
            padding: 10px;
            border-radius: 5px;
        }

        .borda-erro{
            border: 2px solid red;
        }

        #radio-container{
            display: flex;
        }
    </style>
</head>
<body>
    <h2>Cadástro de usuário</h2>
    <form action="" id="user-form" name="user-form">
        <div>
            <label for="user-name">Nome</label>
            <input type="text" name="user-name" id="user-name" 
                placeholder="Digite o seu nome" required maxlength="50">
        </div>
        <div>
            <label for="email">E-mail</label>
            <input type="email" name="email" id="email"
                placeholder="email@exemplo.com" required maxlength="30">
        </div>

        <div>
            <label for="birthday">Dia de nascimento</label>
            <input type="date" name="birthday" id="birthday">
        </div>

        <div>
            <label for="turma">Turma</label>
            <select name="turma" id="turma">
                <option value="" selected>Selecione uma turma</option>
                <option value="turma01">Turma 1</option>
                <option value="turma02">Turma 2</option>
                <option value="turma03">Turma 3</option>
                <option value="turma04">Turma 4</option>
                <option value="turma05">Turma 5</option>
                <option value="turma06">Turma 6</option>
                <option value="turma07">Turma 7</option>
                <option value="turma08">Turma 8</option>
            </select>
        </div>

         <div id="radio-container">
                    <input type="radio" name="sexo" id="masculino" value="m">
                    <label id="radio-label" for="masculino">Masculino</label>
        </div>

        <div id="radio-container">
                    <input type="radio" name="sexo" id="feminino" value="f">
                    <label id="radio-label" for="feminino">Feminino</label>
        </div>

        <div id="radio-container">
                    <input type="radio" name="sexo" id="outro" value="o">
                    <label id="radio-label" for="outro">Outro</label>
         </div>

        <div>
            <label for="password">Senha</label>
            <input type="password" name="password" id="password"
                required minlength="6" maxlength="20"
                placeholder="De 6 a 20 caracteres">
        </div>

        <div>
            <label for="confirm-password">Confirmar senha</label>
            <input type="password" name="confirm-password" id="confirm-password"
                required minlength="6" maxlength="20"
                placeholder="De 6 a 20 caracteres">
        </div>

        <div>
            <input type="submit" id="send-button" onclick="enviarForm()" value="Enviar">
        </div>
    </form>
    
    <script>

        let inputNome = document.getElementById('user-name');
        let inputEmail = document.getElementById('email');

        inputNome.addEventListener('input', function(){
            (this).classList.remove('borda-erro');
        })

        inputEmail.addEventListener('input', function(){
            inputEmail.classList.remove('borda-erro');
        })

        inputNome.addEventListener('blur', function(){
            if(inputNome.value.length < 2){
                inputNome.classList.add('borda-erro');
            }
        })

        function enviarForm(){

            let nome = document.getElementById('user-name').value;
            let email = document.getElementById('email').value;
            let dataNascimento = document.getElementById('birthday').value;
            let turma = document.getElementById('turma').value;
            let senha = document.getElementById('password').value;
            let confirmarSenha = document.getElementById('confirm-password').value;

            let radios = document.getElementsByName('sexo');
            let sexo = null;

            for(let i = 0; i < radios.length; i++){
                if(radios[i].checked){
                    sexo = radios[i].value;
                    break;
                }
            }

            alert(sexo)

            if(!maiorDeIdade(dataNascimento)){
                document.getElementById('birthday').classList.add('borda-erro');
            }
            if(nome.length < 2){
                document.getElementById('user-name').classList.add('borda-erro');
            }
            if(email.length === 0){
                document.getElementById('email').classList.add('borda-erro');
            }
            if(senha.length === 0){
                document.getElementById('password').classList.add('borda-erro');
            }

            if(confirmarSenha.length === 0){
                document.getElementById('confirm-password').classList.add('borda-erro');
            }
            // if(senha !== confirmarSenha){
            //     alert("As senhas não são iguais.");
            // } else {
            //     alert("Cadástro enviado com sucesso!")
            // }
        }
        
        function maiorDeIdade(data){
            if(!data) return false;

            let hoje = new Date();
            let nascimento = new Date(data);

            let idade = hoje.getFullYear() - nascimento.getFullYear();
            let mes = hoje.getMonth() - nascimento.getMonth()

            if(mes < 0 || (mes === 0 && hoje.getDate() < nascimento.getDate())){
                idade--;
            }

            return idade >= 18;
        }
    </script>
</body>
</html>